using Content.Client.Administration.Systems;
using Content.Shared.Administration.Logs;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.XAML;

namespace Content.Client.Administration.UI.Logs.Entries;

[GenerateTypedNameReferences]
public sealed partial class AdminLogEntryDetails : BoxContainer
{
    public AdminLogEntryDetails(SharedAdminLog log)
    {
        RobustXamlLoader.Load(this);

        Type.Text = log.Type.ToString();
        Impact.Text = log.Impact.ToString();

        LocalTime.Text = $"{log.Date.ToLocalTime():HH:mm:ss}";
        UTCTime.Text = $"{log.Date:HH:mm:ss}";
        // TimeSpan and DateTime use different formatting string conventions for some completely logical reason
        // that mere mortals such as myself will never be able to understand.
        RealTime.Text = new TimeSpan(log.RealTime).ToString(@"hh\:mm\:ss");
        CurTime.Text = new TimeSpan(log.CurTime).ToString(@"hh\:mm\:ss");

        PlayerList.AddChild(new AdminLogEntryPlayerList(log.Players));
    }
}
