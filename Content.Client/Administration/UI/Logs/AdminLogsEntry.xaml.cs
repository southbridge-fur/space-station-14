using Content.Client.Administration.UI.CustomControls;
using Content.Shared.Administration.Logs;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.XAML;
using Robust.Shared.Timing;

namespace Content.Client.Administration.UI.Logs;

[GenerateTypedNameReferences]
public sealed partial class AdminLogsEntry : BoxContainer
{
    [Dependency] private readonly IGameTiming _gameTiming = default!;
    public SharedAdminLog Log { get; }

    public AdminLogsEntry(ref SharedAdminLog log)
    {
        RobustXamlLoader.Load(this);

        Log = log;
        Message.SetMessage($"{log.Date:HH:mm:ss}: {log.Message}");
        Type = Log.Type.ToString();
        Impact = Log.Impact.ToString();

        LocalTime = TimeZoneInfo.ConvertTimeFromUtc(Log.Date, TimeZoneInfo.Local).ToString("HH:mm:ss");
        UTCTime = Log.Date.ToString("HH:mm:ss");
        RealTime = Log.RealTime;
    }
}
